"use strict";(self.webpackChunkuser_account=self.webpackChunkuser_account||[]).push([[503],{8503:(nt,h,a)=>{a.r(h),a.d(h,{AccountModule:()=>B});var O=a(8101),g=a(9808),l=a(518),M=a(5503),x=a(1075),t=a(5e3),w=a(6325),d=a(8505),A=a(9646),_=a(2722),N=a(262),Z=a(4004),C=a(6714),f=a(453),u=a(6880),T=a(2340),i=a(3075),y=a(4411),P=a(4997),v=a(7319),I=a(1634),b=a(7232),E=a(2313),S=a(7531),p=a(9413),F=a(7322);const L=["selectFileInput"];function k(e,c){1&e&&t._UZ(0,"div",19)}function D(e,c){if(1&e&&t._UZ(0,"img",20),2&e){const n=t.oxw(2);t.Q6J("src",n.sanitizer.bypassSecurityTrustResourceUrl(n.avatarImg),t.LSH)}}function R(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"label",21),t._uU(1,"ID"),t.qZA(),t.TgZ(2,"input",22),t.NdJ("ngModelChange",function(r){return t.CHM(n),t.oxw(2).account.ID=r}),t.qZA(),t.TgZ(3,"label",21),t._uU(4,"Email"),t.qZA(),t.TgZ(5,"input",22),t.NdJ("ngModelChange",function(r){return t.CHM(n),t.oxw(2).account.Email=r}),t.qZA(),t.TgZ(6,"label",21),t._uU(7,"PhoneNumber"),t.qZA(),t.TgZ(8,"input",22),t.NdJ("ngModelChange",function(r){return t.CHM(n),t.oxw(2).account.PhoneNumber=r}),t.qZA(),t.TgZ(9,"label",21),t._uU(10,"BirthDate"),t.qZA(),t.TgZ(11,"div",23)(12,"input",24),t.NdJ("ngModelChange",function(r){return t.CHM(n),t.oxw(2).account.BirthDate=r}),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"mat-datepicker-toggle",25)(15,"mat-datepicker",26,27),t.qZA()}if(2&e){const n=t.MAs(16),o=t.oxw(2);t.xp6(2),t.Q6J("ngModel",o.account.ID)("disabled",!0),t.xp6(3),t.Q6J("ngModel",o.account.Email)("disabled",!0),t.xp6(3),t.Q6J("ngModel",o.account.PhoneNumber)("disabled",!0),t.xp6(4),t.s9C("placeholder",t.lcZ(13,12,"PLACEHOLDER.SELECT_BIRTHDATE")),t.Q6J("matDatepicker",n)("ngModel",o.account.BirthDate)("disabled",!0),t.xp6(2),t.Q6J("for",n)("disabled",!0)}}function U(e,c){1&e&&(t.TgZ(0,"small",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.FIELD_REQUIRED")," "))}function H(e,c){1&e&&(t.TgZ(0,"small",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.FIELD_REQUIRED")," "))}function J(e,c){1&e&&(t.TgZ(0,"small",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.INVALID_PASSWORD_FORMAT")," "))}function z(e,c){1&e&&(t.TgZ(0,"small",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.SAME_WITH_OLD_PASSWORD")," "))}function Q(e,c){1&e&&(t.TgZ(0,"small",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.FIELD_REQUIRED")," "))}function Y(e,c){1&e&&(t.TgZ(0,"small",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.NOT_SAME_WITH_NEW_PASSWORD")," "))}const m=function(e){return{"input-error":e}};function W(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"form",28)(1,"div",29),t._UZ(2,"input",30),t.ALo(3,"translate"),t.YNc(4,U,3,3,"small",31),t.qZA(),t.TgZ(5,"div",29),t._UZ(6,"input",32),t.ALo(7,"translate"),t.YNc(8,H,3,3,"small",31),t.YNc(9,J,3,3,"small",31),t.YNc(10,z,3,3,"small",31),t.qZA(),t.TgZ(11,"div",29),t._UZ(12,"input",33),t.ALo(13,"translate"),t.YNc(14,Q,3,3,"small",31),t.YNc(15,Y,3,3,"small",31),t.qZA()(),t.TgZ(16,"button",34),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).changePassword()}),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("formGroup",n.changePasswordForm),t.xp6(2),t.Tol(t.VKq(29,m,n.getFormControl().OldPassword.errors)),t.s9C("placeholder",t.lcZ(3,19,"PLACEHOLDER.ENTER_PASSWORD")),t.xp6(2),t.Q6J("ngIf",n.getFormControl().OldPassword.hasError("required")),t.xp6(2),t.Tol(t.VKq(31,m,n.getFormControl().NewPassword.errors)),t.s9C("placeholder",t.lcZ(7,21,"PLACEHOLDER.ENTER_NEW_PASSWORD")),t.xp6(2),t.Q6J("ngIf",n.getFormControl().NewPassword.hasError("required")),t.xp6(1),t.Q6J("ngIf",n.getFormControl().NewPassword.hasError("pattern")),t.xp6(1),t.Q6J("ngIf",!n.validations.usablePassword),t.xp6(2),t.Tol(t.VKq(33,m,n.getFormControl().NewPasswordConfirm.errors)),t.s9C("placeholder",t.lcZ(13,23,"PLACEHOLDER.ENTER_NEW_PASSWORD_CONFIRM")),t.xp6(2),t.Q6J("ngIf",n.getFormControl().NewPasswordConfirm.hasError("required")),t.xp6(1),t.Q6J("ngIf",!n.validations.confirmPassword),t.xp6(1),t.Q6J("disabled",n.changePasswordForm.invalid||!n.validations.confirmPassword||!n.validations.usablePassword),t.xp6(1),t.AsE(" ",t.lcZ(18,25,"MODEL.CHANGE"),"",t.lcZ(19,27,"ACCOUNT.PASSWORD")," ")}}const j=function(e){return{"on-hover":e}};function q(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.NdJ("mouseenter",function(){return t.CHM(n),t.oxw().onHover(!0)})("mouseleave",function(){return t.CHM(n),t.oxw().onHover(!1)})("click",function(){return t.CHM(n),t.oxw().clickSelectFile()}),t.TgZ(3,"div",4),t.YNc(4,k,1,0,"div",5),t.YNc(5,D,1,1,"img",6),t.TgZ(6,"input",7,8),t.NdJ("change",function(r){return t.CHM(n),t.oxw().selectFile(r)}),t.qZA()(),t.TgZ(8,"div",9),t._UZ(9,"div",10),t.qZA()(),t.TgZ(10,"div",11)(11,"h3",12),t._uU(12),t.qZA()(),t.TgZ(13,"ul",13,14)(15,"li",15)(16,"a",16),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,R,17,14,"ng-template",17),t.qZA(),t.TgZ(20,"li",15)(21,"a",16),t._uU(22),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.YNc(25,W,20,35,"ng-template",17),t.qZA()(),t._UZ(26,"div",18),t.qZA()()}if(2&e){const n=t.MAs(14),o=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(15,j,o.onHovering)),t.xp6(2),t.Q6J("ngIf",""===o.avatarImg),t.xp6(1),t.Q6J("ngIf",""!==o.avatarImg),t.xp6(7),t.AsE(" ",o.account.FirstName," ",o.account.LastName," "),t.xp6(5),t.hij(" ",t.lcZ(18,9,"ACCOUNT.PROFILE")," "),t.xp6(5),t.AsE(" ",t.lcZ(23,11,"MODEL.CHANGE"),"",t.lcZ(24,13,"ACCOUNT.PASSWORD")," "),t.xp6(4),t.Q6J("ngbNavOutlet",n)}}const G=[{path:"",component:(()=>{class e extends w.H{constructor(n,o,r,s,V,K,$,X,tt){super(),this.accountServ=n,this.cd=o,this.formBuilder=r,this.router=s,this.authStore=V,this.errServ=K,this.spinnerState=$,this.translateServ=X,this.sanitizer=tt,this.storageAccountTag=T.N.storageAccountTag,this.avatarImg="",this.onHovering=!1,this.auth$=this.authStore.select(f.dy),this.account=new C.L.LoggedInAccount,this.changePasswordForm=this.formBuilder.group({ID:0,Email:"",OldPassword:["",i.kI.required],NewPassword:["",[i.kI.required,i.kI.pattern("^(?=.*[0-9]+.*)(?=.*[a-zA-Z]+.*)[0-9a-zA-Z]{4,8}$")]],NewPasswordConfirm:["",i.kI.required]}),this.validations={usablePassword:!1,confirmPassword:!1}}ngOnInit(){this.authListener(),this.account=JSON.parse(localStorage.getItem(this.storageAccountTag)),console.log(this.account),this.changePasswordForm.valueChanges.pipe((0,d.b)(()=>this.passwordValidator())).subscribe()}authListener(){this.auth$.pipe((0,_.R)(this.unsubscribe$),(0,d.b)(n=>{n&&(this.account=n,this.resetChangePasswordForm())})).subscribe()}resetChangePasswordForm(){this.validations={usablePassword:!1,confirmPassword:!1},this.changePasswordForm.reset(),this.changePasswordForm.patchValue({ID:this.account.ID,Email:this.account.Email}),this.cd.markForCheck()}getFormControl(){return{OldPassword:this.changePasswordForm.get("OldPassword"),NewPassword:this.changePasswordForm.get("NewPassword"),NewPasswordConfirm:this.changePasswordForm.get("NewPasswordConfirm")}}checkSamePassword(n,o){return n===o}passwordValidator(){let n=this.getFormControl().OldPassword.value,o=this.getFormControl().NewPassword.value,r=this.getFormControl().NewPasswordConfirm.value;this.validations.usablePassword=!this.checkSamePassword(n,o),this.validations.confirmPassword=this.checkSamePassword(o,r)}changePassword(){let n=this.changePasswordForm.getRawValue(),o=new C.L.ChangePassword;o.ID=n.ID,o.Email=n.Email,o.OldPassword=n.OldPassword,o.NewPassword=n.NewPassword,this.spinnerState.dispatch(new u.Uj("")),this.accountServ.ChangePassword(o).pipe((0,_.R)(this.unsubscribe$),(0,N.K)(r=>(this.errServ.HttpErrorHandle(r),this.spinnerState.dispatch(new u.UY),(0,A.of)())),(0,Z.U)(r=>r.Data),(0,d.b)(()=>{alert(this.translateServ.instant("ALERT.CHANGE_PASSWORD_SUCCESS")),this.spinnerState.dispatch(new u.UY),this.signOut()})).subscribe()}signOut(){this.authStore.dispatch(new f.iM)}onHover(n){this.onHovering=n}clickSelectFile(){this.selectFileInput.nativeElement.click()}selectFile(n){let o=new FileReader;o.readAsDataURL(n.target.files[0]),o.onloadstart=()=>{o.onload=r=>{2===o.readyState&&(this.avatarImg=o.result,this.cd.markForCheck())}}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(y.B),t.Y36(t.sBO),t.Y36(i.qu),t.Y36(P.F0),t.Y36(v.yh),t.Y36(I.q),t.Y36(v.yh),t.Y36(b.sK),t.Y36(E.H7))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account"]],viewQuery:function(n,o){if(1&n&&t.Gf(L,5,t.SBq),2&n){let r;t.iGM(r=t.CRH())&&(o.selectFileInput=r.first)}},features:[t.qOj],decls:1,vars:1,consts:[["class","account-page container-fluid",4,"ngIf"],[1,"account-page","container-fluid"],[1,"profile","col-11","col-sm-8","col-md-6","mx-auto"],["type","button",1,"avatar-group","d-flex","justify-content-center","flex-wrap","mb-3",3,"ngClass","mouseenter","mouseleave","click"],[1,"avatar-frame","shadow"],["class","avatar",4,"ngIf"],["class","img-fluid",3,"src",4,"ngIf"],["type","file","accept",".png,.jpg,.jpeg",1,"invisible",3,"change"],["selectFileInput",""],[1,"icon-container","shadow"],[1,"icon","icon-edit"],[1,"mb-5"],[1,"text-center"],["ngbNav","",1,"nav-tabs","mb-3"],["nav","ngbNav"],["ngbNavItem","",1,"nav-item"],["ngbNavLink","",1,"nav-link"],["ngbNavContent",""],[1,"px-3",3,"ngbNavOutlet"],[1,"avatar"],[1,"img-fluid",3,"src"],[1,"text-mediumgray","mb-1"],["matInput","","type","search","autocomplete","off",1,"form-control","h5","mb-3",3,"ngModel","disabled","ngModelChange"],[1,"date-picker-group","w-100"],["matInput","","type","search","autocomplete","off",1,"form-control",3,"matDatepicker","placeholder","ngModel","disabled","ngModelChange"],["matSuffix","",3,"for","disabled"],["disabled","false","touchUi","true"],["picker",""],[1,"flex-form-group","mb-3",3,"formGroup"],[1,"w-100"],["matInput","","type","search","autocomplete","off","formControlName","OldPassword",1,"form-control",3,"placeholder"],["class","text-red",4,"ngIf"],["matInput","","type","search","autocomplete","off","formControlName","NewPassword",1,"form-control",3,"placeholder"],["matInput","","type","search","autocomplete","off","formControlName","NewPasswordConfirm",1,"form-control",3,"placeholder"],["type","button",1,"btn","btn-lg","w-100","btn-yellow","text-white",3,"disabled","click"],[1,"text-red"]],template:function(n,o){1&n&&t.YNc(0,q,27,17,"div",0),2&n&&t.Q6J("ngIf",o.account)},directives:[g.O5,g.mk,l.Pz,l.nv,l.Vx,l.uN,S.Nt,i.Fj,i.JJ,i.On,p.hl,p.nW,F.R9,p.Mq,i._Y,i.JL,i.sg,i.u,l.tO],pipes:[b.X$],styles:['html[_ngcontent-%COMP%]{line-height:1.15;-webkit-text-size-adjust:100%}body[_ngcontent-%COMP%]{margin:0}main[_ngcontent-%COMP%]{display:block}h1[_ngcontent-%COMP%]{font-size:2em;margin:.67em 0}hr[_ngcontent-%COMP%]{box-sizing:content-box;height:0;overflow:visible}pre[_ngcontent-%COMP%]{font-family:monospace,monospace;font-size:1em}a[_ngcontent-%COMP%]{background-color:transparent}abbr[title][_ngcontent-%COMP%]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:bolder}code[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], samp[_ngcontent-%COMP%]{font-family:monospace,monospace;font-size:1em}small[_ngcontent-%COMP%]{font-size:80%}sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub[_ngcontent-%COMP%]{bottom:-.25em}sup[_ngcontent-%COMP%]{top:-.5em}img[_ngcontent-%COMP%]{border-style:none}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{overflow:visible}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{text-transform:none}button[_ngcontent-%COMP%], [type=button][_ngcontent-%COMP%], [type=reset][_ngcontent-%COMP%], [type=submit][_ngcontent-%COMP%]{-webkit-appearance:button}button[_ngcontent-%COMP%]::-moz-focus-inner, [type=button][_ngcontent-%COMP%]::-moz-focus-inner, [type=reset][_ngcontent-%COMP%]::-moz-focus-inner, [type=submit][_ngcontent-%COMP%]::-moz-focus-inner{border-style:none;padding:0}button[_ngcontent-%COMP%]:-moz-focusring, [type=button][_ngcontent-%COMP%]:-moz-focusring, [type=reset][_ngcontent-%COMP%]:-moz-focusring, [type=submit][_ngcontent-%COMP%]:-moz-focusring{outline:1px dotted ButtonText}fieldset[_ngcontent-%COMP%]{padding:.35em .75em .625em}legend[_ngcontent-%COMP%]{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress[_ngcontent-%COMP%]{vertical-align:baseline}textarea[_ngcontent-%COMP%]{overflow:auto}[type=checkbox][_ngcontent-%COMP%], [type=radio][_ngcontent-%COMP%]{box-sizing:border-box;padding:0}[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, [type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{height:auto}[type=search][_ngcontent-%COMP%]{-webkit-appearance:textfield;outline-offset:-2px}[type=search][_ngcontent-%COMP%]::-webkit-search-decoration{-webkit-appearance:none}[_ngcontent-%COMP%]::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details[_ngcontent-%COMP%]{display:block}summary[_ngcontent-%COMP%]{display:list-item}template[_ngcontent-%COMP%]{display:none}[hidden][_ngcontent-%COMP%]{display:none}html[_ngcontent-%COMP%]{font-size:16px;line-height:1.5rem;width:100vw}body[_ngcontent-%COMP%]{font-family:Microsoft JhengHei,MingLiU,"sans-serif",Helvetica Neue,Helvetica,Arial,sans-serif}*[_ngcontent-%COMP%]{box-sizing:border-box}.input-error[_ngcontent-%COMP%]{border:1px solid #c61e1e}.btn[_ngcontent-%COMP%]{border-radius:10px;transition:.3s}.btn-yellow[_ngcontent-%COMP%]{background-color:#fac326}.btn-yellow[_ngcontent-%COMP%]:hover{background-color:#fac326e6}.btn-green[_ngcontent-%COMP%]{background-color:#1fb72e}.btn-green[_ngcontent-%COMP%]:hover{background-color:#1fb72ee6}.btn-link-blue[_ngcontent-%COMP%]{color:#14559b}.btn-link-blue[_ngcontent-%COMP%]:hover{color:#2371c3}.text-light[_ngcontent-%COMP%]{color:#fff}.text-lightgray[_ngcontent-%COMP%]{color:#e2e2e2}.text-mediumgray[_ngcontent-%COMP%]{color:#878787}.text-red[_ngcontent-%COMP%]{color:#c61e1e}.date-picker-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:nowrap;gap:10px}.icon[_ngcontent-%COMP%]{width:80%;height:80%;background-size:cover;background-position:center}.icon-container[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;justify-content:center;align-items:center;flex-wrap:wrap;text-decoration:none;margin:0 auto}.icon-container-lg[_ngcontent-%COMP%]{width:60px;height:60px}.icon-github-dark[_ngcontent-%COMP%]{background-image:url(github-icon-dark.df059a84f8ad980b.png)}.icon-github-light[_ngcontent-%COMP%]{background-image:url(github-icon-light.d6663d0e14f00b36.png)}.icon-account[_ngcontent-%COMP%]{background-image:url(account.63e23856efcb263b.png)}.icon-edit[_ngcontent-%COMP%]{background-image:url(edit.ec0a8a65d9fa7512.png)}.flex-form-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px 15px}.invisible[_ngcontent-%COMP%]{opacity:0}.account-page[_ngcontent-%COMP%]{padding:60px 0 100px;height:100%}.account-page[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{max-width:450px}.account-page[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{transition:.3s;width:100%;height:100%;background-image:url(avatar.05310079ff8be93e.png);background-position:center;background-size:120%}.account-page[_ngcontent-%COMP%]   .avatar-group[_ngcontent-%COMP%]{position:relative}.account-page[_ngcontent-%COMP%]   .avatar-group[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{position:absolute;transition:.3s;left:58%;top:65%;background-color:#2371c3;border-radius:50%;overflow:hidden}.account-page[_ngcontent-%COMP%]   .avatar-group[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   .icon-edit[_ngcontent-%COMP%]{transform:scale(.7);filter:invert(80%) sepia(85%) saturate(2%) hue-rotate(269deg) brightness(113%) contrast(101%)}.account-page[_ngcontent-%COMP%]   .avatar-group.on-hover[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{transform:translateY(3px);box-shadow:none!important}.account-page[_ngcontent-%COMP%]   .avatar-group.on-hover[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{filter:brightness(105%)}.account-page[_ngcontent-%COMP%]   .avatar-frame[_ngcontent-%COMP%]{overflow:hidden;border-radius:30px;width:100px;height:100px}'],changeDetection:0}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.IJ,x.m,M.D,g.ez,O.xJ,P.Bz.forChild(G)]]}),e})()}}]);